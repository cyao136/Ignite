<% provide(:title, @cur_genre + " Games") %>
<div class="container">
	<div class="row">
		<form action="category" method="GET">
			<div class="col-xs-6 col-lg-3">
				Genre: <select name="genre" id="genre" class="select form-control" onchange="this.form.submit()">
					<option value='All'>Everything</option>
					<% Project.tag_counts_on(:tags).most_used(10).each do |tag| %>
						<option value=<%= tag.name %> ><%= tag.name %></option>
					<% end %>
				</select>
			</div>
			<div class="col-xs-6 col-lg-3">
				Sort: <select name="sort" id="sort" class="select form-control" onchange="this.form.submit()">
					<option value='random'>Random</option>
					<option value='newest'>Newest</option>
					<option value='most_popular'>Most Popular</option>
					<option value='soon_ending'>Soon Ending</option>
				</select>
			</div>
			<input name="states" id="states" class="form-control" multiple="multiple" data-selected='<%= @states %>' hidden=true value=<%= Project.states[:funding_ext] %>></input>
		</form>
	</div>

	<hr>

    <%= render partial: "display", locals: {projects: @projects} %>

	<script type="text/javascript">
		$(document).ready(function() {
			$(".select").select2({
				minimumResultsForSearch: Infinity
			});

			$("#genre").select2("val", "<%= @cur_genre %>");
			$("#sort").select2("val", "<%= @cur_sort %>");
		});
	</script>
</div>
